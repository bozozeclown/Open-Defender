<div class="mt-4">
    <h5 class="mb-3">Docker Troubleshooting</h5>
    <div class="alert alert-danger">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        If you're encountering Docker connection errors, follow these steps to resolve them.
    </div>
    
    <div class="accordion" id="dockerTroubleshootingAccordion">
        <div class="accordion-item">
            <h2 class="accordion-header" id="dockerHeadingOne">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dockerCollapseOne" aria-expanded="false" aria-controls="dockerCollapseOne">
                    <i class="bi bi-tools me-2"></i> Docker Desktop Not Running
                </button>
            </h2>
            <div id="dockerCollapseOne" class="accordion-collapse collapse" aria-labelledby="dockerHeadingOne" data-bs-parent="#dockerTroubleshootingAccordion">
                <div class="accordion-body">
                    <p>If you're getting "The system cannot find the file specified" errors:</p>
                    <ol>
                        <li>Check if Docker Desktop is running:
                            <ul>
                                <li>Look for the Docker Desktop icon in your system tray (bottom-right corner)</li>
                                <li>If it's not there, search for "Docker Desktop" in the Start menu and launch it</li>
                                <li>Wait for Docker Desktop to fully start (this may take a minute or two)</li>
                            </ul>
                        </li>
                        <li>Restart Docker Desktop:
                            <ul>
                                <li>Right-click the Docker Desktop icon in the system tray</li>
                                <li>Select "Restart"</li>
                                <li>Wait for the restart to complete</li>
                            </ul>
                        </li>
                        <li>If Docker Desktop won't start:
                            <ul>
                                <li>Reset Docker Desktop to factory defaults:
                                    <ul>
                                        <li>Right-click the Docker Desktop icon</li>
                                        <li>Select "Troubleshoot"</li>
                                        <li>Click "Reset to factory defaults"</li>
                                        <li>Confirm the reset</li>
                                    </ul>
                                </li>
                                <li>Restart your computer after resetting</li>
                            </ul>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
        
        <div class="accordion-item">
            <h2 class="accordion-header" id="dockerHeadingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dockerCollapseTwo" aria-expanded="false" aria-controls="dockerCollapseTwo">
                    <i class="bi bi-terminal me-2"></i> Alternative Docker Commands
                </button>
            </h2>
            <div id="dockerCollapseTwo" class="accordion-collapse collapse" aria-labelledby="dockerHeadingTwo" data-bs-parent="#dockerTroubleshootingAccordion">
                <div class="accordion-body">
                    <p>The <code>docker-compose</code> command is being deprecated. Try using the newer <code>docker compose</code> command instead:</p>
                    
                    <div class="command-block">
                        <button class="copy-button" data-copy="docker compose up -d">
                            <i class="bi bi-clipboard"></i>
                        </button>
                        docker compose up -d
                    </div>
                    
                    <p>To check which version you have:</p>
                    <div class="command-block">
                        <button class="copy-button" data-copy="docker --version&#10;docker-compose --version">
                            <i class="bi bi-clipboard"></i>
                        </button>
                        docker --version<br>
                        docker-compose --version
                    </div>
                    
                    <p>If you don't have the new Docker Compose plugin, install it:</p>
                    <div class="command-block">
                        <button class="copy-button" data-copy="docker-compose-plugin install">
                            <i class="bi bi-clipboard"></i>
                        </button>
                        docker-compose-plugin install
                    </div>
                </div>
            </div>
        </div>
        
        <div class="accordion-item">
            <h2 class="accordion-header" id="dockerHeadingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dockerCollapseThree" aria-expanded="false" aria-controls="dockerCollapseThree">
                    <i class="bi bi-arrow-repeat me-2"></i> Docker Service Issues
                </button>
            </h2>
            <div id="dockerCollapseThree" class="accordion-collapse collapse" aria-labelledby="dockerHeadingThree" data-bs-parent="#dockerTroubleshootingAccordion">
                <div class="accordion-body">
                    <p>If Docker services are not running properly:</p>
                    
                    <div class="mb-3">
                        <button type="button" class="btn btn-outline-primary" id="checkDockerServices">
                            Check Docker Services <i class="bi bi-gear"></i>
                        </button>
                    </div>
                    
                    <div id="dockerServicesStatus" class="alert d-none"></div>
                    
                    <div id="dockerServicesInstructions" class="d-none">
                        <h6>Enabling Required Services</h6>
                        <p>If any of the required services are not running, follow these steps:</p>
                        
                        <div class="db-creation-steps">
                            <div class="db-creation-step">
                                <h6>Open Services Manager</h6>
                                <p>Press <code>Win + R</code>, type <code>services.msc</code>, and press Enter.</p>
                            </div>
                            
                            <div class="db-creation-step">
                                <h6>Enable Docker Desktop Service</h6>
                                <p>
                                    1. Find the "Docker Desktop Service" in the list.<br>
                                    2. Right-click on it and select "Properties".<br>
                                    3. Set the "Startup type" to "Automatic".<br>
                                    4. Click "Start" to start the service.<br>
                                    5. Click "Apply" and then "OK".
                                </p>
                            </div>
                            
                            <div class="db-creation-step">
                                <h6>Enable Hyper-V Service</h6>
                                <p>
                                    1. Find the "Hyper-V Host Compute Service" service.<br>
                                    2. Right-click on it and select "Properties".<br>
                                    3. Set the "Startup type" to "Automatic".<br>
                                    4. Click "Start" to start the service.<br>
                                    5. Click "Apply" and then "OK".
                                </p>
                            </div>
                        </div>
                        
                        <div class="command-block">
                            <button class="copy-button" data-copy="sc config com.docker.service start= auto&#10;sc start com.docker.service&#10;sc config vmcompute start= auto&#10;sc start vmcompute">
                                <i class="bi bi-clipboard"></i>
                            </button>
                            sc config com.docker.service start= auto<br>
                            sc start com.docker.service<br>
                            sc config vmcompute start= auto<br>
                            sc start vmcompute
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle-fill me-2"></i>
                            After enabling the services, restart Docker Desktop and try again.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="accordion-item">
            <h2 class="accordion-header" id="dockerHeadingFour">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dockerCollapseFour" aria-expanded="false" aria-controls="dockerCollapseFour">
                    <i class="bi bi-hdd-network me-2"></i> WSL 2 Issues
                </button>
            </h2>
            <div id="dockerCollapseFour" class="accordion-collapse collapse" aria-labelledby="dockerHeadingFour" data-bs-parent="#dockerTroubleshootingAccordion">
                <div class="accordion-body">
                    <p>Docker Desktop uses WSL 2. If you're having issues:</p>
                    <ol>
                        <li>Check WSL 2 installation:
                            <div class="command-block">
                                <button class="copy-button" data-copy="wsl --status">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                                wsl --status
                            </div>
                        </li>
                        <li>If WSL 2 is not installed or enabled:
                            <div class="command-block">
                                <button class="copy-button" data-copy="dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart&#10;dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                                dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart<br>
                                dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
                            </div>
                        </li>
                        <li>Download and install the WSL 2 kernel update:
                            <a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi" target="_blank">Download WSL 2 Kernel</a>
                        </li>
                        <li>Set WSL 2 as default:
                            <div class="command-block">
                                <button class="copy-button" data-copy="wsl --set-default-version 2">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                                wsl --set-default-version 2
                            </div>
                        </li>
                        <li>Restart your computer</li>
                        <li>Start Docker Desktop again</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>